# Карта зависимостей модулей

Этот документ описывает направленные связи между модулями в проекте. Основная цель — поддерживать архитектуру прозрачной и избегать циклических зависимостей.

**Правило:** Модуль может импортировать функции или компоненты только из "публичного API" другого модуля (его корневого `index.ts` файла).

## Схема зависимостей

- `auth`
  - **Зависит от:** (нет)
  - **Описание:** Базовый модуль, предоставляющий данные о пользователе другим модулям.

- `programs`
  - **Зависит от:** `auth`
  - **Описание:** Нуждается в ID текущего пользователя для получения и управления его программами.

- `sections`
  - **Зависит от:** `programs`
  - **Описание:** Разделы существуют в контексте программы, поэтому модуль `sections` зависит от ID программы.

- `questions`
  - **Зависит от:** `sections`
  - **Описание:** Вопросы привязаны к разделам. Модуль `questions` работает с вопросами в рамках конкретного раздела.

- `quiz`
  - **Зависит от:** `questions`, `stats`
  - **Описание:**
    - Обращается к `questions` для получения набора вопросов для теста (по разделу или случайных по программе).
    - Обращается к `stats` для сохранения результатов пройденного теста.

- `stats`
  - **Зависит от:** (нет, но использует данные всех)
  - **Описание:** Модуль статистики является аггрегирующим. Он не вызывает напрямую функции других модулей, но его логика (`lib`) делает запросы к таблицам БД, которые принадлежат `programs`, `sections` и `questions`, чтобы рассчитать статистику. Это зависимость на уровне данных, а не кода.
