# Отчет: Этап 3.5 - UI: Экран результатов QuizResults

**Статус:** `Завершен`

---

## Цель

Создать компонент `QuizResults` для отображения итоговой статистики после завершения теста. Интегрировать этот компонент в `QuizView`, чтобы он появлялся после ответа на последний вопрос и нажатия кнопки "Завершить".

---

## План действий

1.  **Создание файла компонента `QuizResults`:**
    - **Действие:** Создать новый файл `src/modules/quiz/components/QuizResults.tsx`.

2.  **Реализация компонента `QuizResults`:**
    - **Props:** Компонент будет принимать:
        - `score`: Количество правильных ответов.
        - `totalQuestions`: Общее количество вопросов.
        - `onRestart`: Callback-функция для начала теста заново.
        - `onExit`: Callback-функция для выхода (например, возврата к списку разделов).
    - **Логика:**
        - Вычислить процент правильных ответов.
        - Отобразить статистику в формате: "Правильных ответов: X из Y (Z%)".
        - Отобразить кнопки "Пройти еще раз" и "Вернуться к списку разделов", которые будут вызывать соответствующие callback-функции.

3.  **Интеграция в `QuizView.tsx`:**
    - **Действие:** Открыть существующий файл `src/modules/quiz/components/QuizView.tsx`.
    - **Обновление состояния:**
        - Добавить состояние для отслеживания счета: `score`.
        - Добавить состояние для отслеживания завершения теста: `isFinished`.
    - **Обновление логики:**
        - Модифицировать callback `onAnswerSubmit` в `QuizQuestion`, чтобы он передавал, был ли ответ правильным.
        - В `QuizView` создать функцию `handleAnswerSubmitted`, которая будет принимать результат ответа, обновлять `score` и устанавливать `isAnswerSubmitted` в `true`.
        - В функции `handleFinish` устанавливать `isFinished` в `true`.
    - **Условный рендеринг:**
        - Если `isFinished` равно `true`, отображать `<QuizResults />`, передавая в него `score`, `totalQuestions` и функции для рестарта/выхода.
        - В противном случае, продолжать отображать `<QuizQuestion />`.

4.  **Экспорт компонента:**
    - **Действие:** Экспортировать `QuizResults` из `src/modules/quiz/index.ts`.

---

## Ход выполнения

1.  **Создание `QuizResults.tsx`:** Успешно создан файл. Компонент реализован для отображения итоговой статистики и кнопок "Пройти еще раз" и "Выйти".
2.  **Обновление `QuizQuestion.tsx`:** Callback-функция `onAnswerSubmit` была модифицирована для передачи `isCorrect` (boolean) в родительский компонент, что позволяет `QuizView` отслеживать счет.
3.  **Интеграция в `QuizView.tsx`:**
    - Добавлены новые состояния: `score` для подсчета очков и `isFinished` для управления отображением экрана результатов.
    - Реализована функция `handleAnswerSubmitted` для обновления счета.
    - Реализована функция `handleFinish`, которая изменяет состояние `isFinished` на `true`.
    - Добавлен условный рендеринг: по завершении теста теперь отображается компонент `<QuizResults />`.
    - В `QuizResults` переданы функции для рестарта теста и выхода на предыдущую страницу.
4.  **Экспорт:** Компонент `QuizResults` был успешно добавлен в `index.ts` модуля `quiz`.

**Итог:** Этап успешно завершен. Функционал отображения результатов теста полностью реализован.
